<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pro 3D Social Login</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <style>
        /* ==================================== */
        /* CSS: Styling and 3D Animations */
        /* ==================================== */

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            overflow: hidden; 
            background: #1a237e; /* Dark Blue Base */
            /* فعال کردن پرسپکتیو برای تمام صفحه (ضروری برای 3D) */
            perspective: 1000px; 
        }

        /* ------------------------------------ */
        /* Social/Network Vibe Background (3D Circles) */
        /* ------------------------------------ */
        .social-network-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, #1e3a8a, #1a237e);
            z-index: 1;
        }
        
        /* 3D Circle Animation (Khofan Social Vibe) */
        .social-network-bg::before {
            content: '';
            position: absolute;
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: rgba(79, 195, 247, 0.1);
            top: 10%;
            left: 15%;
            transform: rotateX(60deg) rotateY(0deg) translateZ(-100px);
            animation: circle-move 30s linear infinite;
        }

        .social-network-bg::after {
            content: '';
            position: absolute;
            width: 450px;
            height: 450px;
            border-radius: 50%;
            background: rgba(63, 81, 181, 0.1);
            bottom: 5%;
            right: 10%;
            transform: rotateX(-45deg) rotateY(0deg) translateZ(-200px);
            animation: circle-move 45s linear reverse infinite;
        }

        /* 3D Movement Keyframes */
        @keyframes circle-move {
            0% { transform: rotateX(60deg) rotateY(0deg) translateZ(-100px) translateX(0); }
            50% { transform: rotateX(60deg) rotateY(180deg) translateZ(-150px) translateX(50px); }
            100% { transform: rotateX(60deg) rotateY(360deg) translateZ(-100px) translateX(0); }
        }

        /* ------------------------------------ */
        /* Login Card Styling (3D Floating) */
        /* ------------------------------------ */
        .login-card-wrapper {
            position: relative;
            z-index: 10;
            /* فعال کردن پرسپکتیو برای wrapper */
            transform-style: preserve-3d; 
            transition: transform 1s ease-out; /* برای انیمیشن شناور */
        }
        
        .login-card {
            background: rgba(255, 255, 255, 0.1); 
            backdrop-filter: blur(15px); 
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            width: 100%;
            max-width: 400px;
            padding: 40px;
            color: white;
            opacity: 0; 
            transform: rotateX(15deg) translateZ(-50px); /* حالت اولیه 3D */
            transition: all 1s ease-out;
        }

        /* Entrance Animation (3D Rotation) */
        .login-card-wrapper.animate-in .login-card {
            opacity: 1;
            transform: rotateX(0deg) translateZ(0);
        }
        
        /* 3D Floating/Breathing Animation */
        .login-card-wrapper.animate-in {
            animation: float-3d 8s ease-in-out infinite;
        }

        @keyframes float-3d {
            0% { transform: translate3d(0, 0, 0) rotateY(0deg); }
            50% { transform: translate3d(5px, 15px, 5px) rotateY(0.5deg); }
            100% { transform: translate3d(0, 0, 0) rotateY(0deg); }
        }


        .header-icon {
            font-size: 3.5rem;
            color: #4fc3f7; 
            text-shadow: 0 0 15px rgba(79, 195, 247, 0.7);
            transition: transform 0.5s ease;
        }
        .form-control {
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: #ffffff;
            transition: all 0.3s;
        }
        .form-control:focus {
            background-color: rgba(255, 255, 255, 0.2);
            border-color: #4fc3f7;
            box-shadow: 0 0 0 0.25rem rgba(79, 195, 247, 0.5);
        }
        .login-btn {
            background-image: linear-gradient(45deg, #4fc3f7, #3f51b5);
            border: none;
            font-weight: bold;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .login-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 50%;
            height: 100%;
            background: rgba(255, 255, 255, 0.3);
            transform: skewX(-30deg);
            transition: all 0.5s ease;
        }
        .login-btn:hover::before {
            left: 150%;
        }
        .login-btn:active {
            transform: scale(0.98);
        }
        .success-animation i {
            font-size: 5rem;
            color: #4CAF50; 
            animation: pulse-success 1.5s infinite;
        }
        @keyframes pulse-success {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }
        /* ------------------------------------ */
        /* TOP ALERT CONTAINER STYLING */
        /* ------------------------------------ */
        .top-alert-container {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 600px;
            z-index: 2000; 
        }
        
        /* Alert Styling for Dark Theme */
        .alert-dark-theme {
            background-color: rgba(30, 30, 50, 0.9); 
            color: #f0f0f0;
            border-left: 5px solid;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            margin-bottom: 10px;
            animation: slideDownAndFade 0.5s ease-out forwards;
        }

        .alert-dark-theme.alert-success { border-color: #4CAF50; }
        .alert-dark-theme.alert-warning { border-color: #FFC107; }
        .alert-dark-theme.alert-danger { border-color: #F44336; }
        .alert-dark-theme.alert-info { border-color: #2196F3; }

        @keyframes slideDownAndFade {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="top-alert-container">
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-dismissible fade show alert-dark-theme alert-{{ message.tags }}" role="alert">
                    <i class="fas fa-exclamation-circle me-2"></i> {{ message }}
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endfor %}
        {% endif %}

        {% if form.errors %}
            <div class="alert alert-dismissible fade show alert-dark-theme alert-danger" role="alert">
                <h6 class="alert-heading text-light"><i class="fas fa-times-circle me-2"></i> **Error! Please correct the fields below:**</h6>
                <ul class="list-unstyled mb-0 ms-3">
                    {% for field, errors in form.errors.items %}
                        {% for error in errors %}
                            <li class="small mt-1">
                                {% if field != '__all__' %}
                                    <strong class="text-white-75">{{ field|capfirst }}:</strong>
                                {% endif %}
                                {{ error }}
                            </li>
                        {% endfor %}
                    {% endfor %}
                </ul>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        {% endif %}
    </div>
    <div class="social-network-bg"></div> 

    <div class="container d-flex align-items-center justify-content-center vh-100">
        <div class="login-card-wrapper" id="loginCardWrapper">
            <div class="login-card" id="loginCard">
                
                <div class="text-center mb-5">
                    <i class="fas fa-satellite-dish header-icon mb-3"></i>
                    <h3 class="fw-bold text-white">Connect to the Network</h3>
                    <p class="text-white-50">Log in to access your social space.</p>
                </div>

                <form action="{% url 'accounts:login' %}" method="POST">
                    {% csrf_token %}
                    <div class="mb-4 form-group">
                        <label for="username" class="form-label text-white">Username</label>
                        {{ form.username }}
                    </div>
                    
                    <div class="mb-4 form-group">
                        <label for="password" class="form-label text-white">Password</label>
                        {{ form.password }}
                    </div>
                    
                    <div class="d-grid mt-5">
                        <button type="submit" class="btn btn-lg login-btn">LOG IN</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        /* ==================================== */
        /* JavaScript: Interactivity and "Khofan" Animation */
        /* ==================================== */

        document.addEventListener('DOMContentLoaded', () => {
            // Initial Card Entrance Animation (3D)
            document.getElementById('loginCardWrapper').classList.add('animate-in');
        });

    </script>
</body>
</html>