{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional 3D User Profile</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <style>
        /* ==================================== */
        /* CSS: Styling and 3D Animations (Retained) */
        /* ==================================== */

        body {
            /* font-family: 'Vazirmatn', sans-serif; -- Removed, relying on Bootstrap default */
            direction: ltr; /* Changed to Left-to-Right for English */
            background-color: #1a237e; 
            color: white;
            min-height: 100vh;
            perspective: 1200px; 
            overflow-x: hidden;
        }

        /* Background Gradient and Moving Lines (Retained) */
        .professional-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, #1e3a8a, #1a237e);
            z-index: -1;
        }
        
        /* Moving Grid Animation (Retained) */
        .professional-background::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(to right, rgba(79, 195, 247, 0.1) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(79, 195, 247, 0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: move-grid 60s linear infinite;
        }

        @keyframes move-grid {
            from { background-position: 0 0; }
            to { background-position: 50px 50px; }
        }

        .main-content {
            padding-top: 80px;
            padding-bottom: 80px;
        }

        /* 3D Floating Wrapper (Retained) */
        .profile-card-wrapper {
            position: relative;
            z-index: 10;
            transform-style: preserve-3d; 
            transition: transform 1s ease-out;
            opacity: 0; 
            transform: translateZ(-200px) rotateX(15deg);
            animation: float-3d 10s ease-in-out infinite; 
        }

        /* 3D Entrance Animation (Retained) */
        .profile-card-wrapper.animate-in {
            opacity: 1;
            transform: translateZ(0) rotateX(0deg);
        }

        @keyframes float-3d {
            0% { transform: translate3d(0, 0, 0); }
            50% { transform: translate3d(0, 10px, 10px) rotateY(0.2deg); }
            100% { transform: translate3d(0, 0, 0); }
        }

        /* Main Card (Glassmorphism - Retained) */
        .profile-card {
            background: rgba(255, 255, 255, 0.08); 
            backdrop-filter: blur(12px); 
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            padding: 40px;
        }

        /* Avatar Image (Retained) */
        .avatar-img {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid #4fc3f7; 
            box-shadow: 0 0 10px rgba(79, 195, 247, 0.5);
            transition: transform 0.3s ease;
        }

        .avatar-img:hover {
            transform: scale(1.05) rotateY(10deg); 
        }

        /* Info Fields (Retained) */
        .info-label {
            font-weight: 600;
            color: #4fc3f7;
            font-size: 0.9rem;
        }
        .info-value {
            color: #ffffff;
            font-size: 1rem;
        }
        
        .divider {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Action Button (Retained) */
        .edit-btn {
            background-color: #3f51b5;
            border: none;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .edit-btn:hover {
            background-color: #4fc3f7;
            transform: scale(1.02);
        }
        /* ------------------------------------ */
        /* TOP ALERT CONTAINER STYLING */
        /* ------------------------------------ */
        .top-alert-container {
            position: fixed; /* نمایش در بالای صفحه و بیرون از جریان اسکرول */
            top: 20px;
            left: 50%;
            transform: translateX(-50%); /* مرکزیت افقی */
            width: 90%;
            max-width: 600px; /* پهنای مناسب */
            z-index: 2000; /* بالاتر از همه عناصر */
        }
        
        /* Alert Styling for Dark Theme */
        .alert-dark-theme {
            background-color: rgba(30, 30, 50, 0.9); /* رنگ زمینه تیره شیک */
            color: #f0f0f0;
            border-left: 5px solid; /* خط رنگی در سمت چپ */
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            margin-bottom: 10px;
            animation: slideDownAndFade 0.5s ease-out forwards; /* انیمیشن ورود */
        }

        .alert-dark-theme.alert-success { border-color: #4CAF50; }
        .alert-dark-theme.alert-warning { border-color: #FFC107; }
        .alert-dark-theme.alert-danger { border-color: #F44336; }
        .alert-dark-theme.alert-info { border-color: #2196F3; }

        @keyframes slideDownAndFade {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="top-alert-container">
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-dismissible fade show alert-dark-theme alert-{{ message.tags }}" role="alert">
                    <i class="fas fa-exclamation-circle me-2"></i> {{ message }}
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endfor %}
        {% endif %}
    </div>
    <div class="professional-background"></div>

    <div class="container main-content">
        <div class="row justify-content-center">
            <div class="col-lg-7 col-md-9">
                
                <div class="profile-card-wrapper" id="profileCardWrapper">
                    <div class="profile-card">
                        
                        <div class="text-center mb-5">
                            {% if form.instance.avatar %}
                                <img src="{{ form.instance.avatar.url }}" alt="Avatar" class="avatar-img mb-3">
                            {% else %}    
                                <img src="{% static 'images/default.webp' %}" alt="Avatar" class="avatar-img mb-3">
                            {% endif %}
                            <h3 class="fw-bold mb-0">{{ form.instance.username }}</h3>
                            <p class="text-white-50">Last Updated: {{ form.instance.date_joined }}</p>
                        </div>
                        
                        <div class="row g-4">
                            
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <p class="info-label mb-1"><i class="fas fa-user me-2"></i> Username</p>
                                    {{ form.instance.username }}
                                </div>
                                <div class="mb-3">
                                    <p class="info-label mb-1"><i class="fas fa-signature me-2"></i> First Name</p>
                                    {{ form.instance.first_name }}
                                </div>
                                <div class="mb-3">
                                    <p class="info-label mb-1"><i class="fas fa-signature me-2"></i> Last Name</p>
                                    {{ form.instance.last_name }}
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <p class="info-label mb-1"><i class="fas fa-at me-2"></i> Email Address</p>
                                    {{ form.instance.email }}
                                </div>
                                <div class="mb-3">
                                    <p class="info-label mb-1"><i class="fas fa-birthday-cake me-2"></i> Birth Date</p>
                                    {{ form.instance.birth_date }}
                                </div>
                                <div class="mb-3">
                                    <p class="info-label mb-1"><i class="fas fa-shield-alt me-2"></i> Status</p>
                                    <p class="info-value text-success">Active - Managerial Level</p>
                                </div>
                            </div>

                        </div>
                        
                        <div class="divider mt-4 mb-4"></div>

                        <div class="d-grid">
                            <a href="{% url 'accounts:profile_update' %}">
                                <button class="btn btn-lg edit-btn">
                                    <i class="fas fa-edit me-2"></i> Edit Profile
                                </button>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Initiate the 3D entrance animation for the profile card
            document.getElementById('profileCardWrapper').classList.add('animate-in');
        });
    </script>
</body>
</html>